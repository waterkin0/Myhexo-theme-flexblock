
<!-- header container -->
<header class="header-container<%= is_post() ? ' post' : '' %>">
  <% if ((!is_category()) && (page.cover || theme.banner)) { %>
    <div class="post-image" style="<%= `background-image: url(${theme.cdn + (page.cover || theme.banner)})` %>"></div>
  <% } %>
  <% if (is_category()) { %>
    <%
      var length = 0;
      site.categories.each(function (categorie) {
        if (categorie.name === page.category) length = categorie.length
      });
    %>
    <% site.data.categories.forEach(function(categorie_name) { %>
      <% if (categorie_name.name == page.category) { %>
        <% if (categorie_name.cover) { %>
          <div class="post-image" style="<%= `background-image: url(${theme.cdn + (categorie_name.cover || theme.banner)})` %>"></div>
        <% } %>
      <% } %>
    <% }) %>
  <% } %>

  <%- partial('_partial/nav', null, {cache: !config.relative_link}) %>

  <%# index container %>
  <% if (is_home()) { %>
    <div class="header-content">
      <div class="post-text layout-block layout-padding">
        <h1 class="title-wrap"><%= config.title %></h1>
        <% if (config.subtitle) { %>
          <span id="typed"></span>
          <script src="https://unpkg.com/typed.js@2.0.14/dist/typed.umd.js"></script>
          <script>
            var typed = new Typed("#typed", {
            strings: ["å‡¡ä¸ºäººè€…,çš†æ˜¯æ˜Ÿè¾°","Every man and every woman is a star","äººã¨ã—ã¦ã®ã™ã¹ã¦ã¯æ˜Ÿã§ã‚ã‚‹"],
            startDelay: 200,
            backDelay: 2000,
            typeSpeed: 100,
            loop: true,
            backSpeed: 20
            })
          </script>
        <% } %>
      </div>
    </div>
  <% } %>

  <%# archive container %>
  <% if (is_archive()) { %>
    <div class="header-content">
      <div class="post-text layout-block layout-padding">
        <h1 class="title-wrap">å½’æ¡£</h1>
        <h2 class="title-sub-wrap">å…±æœ‰<%= site.posts.length %>ç¯‡æ–‡ç« </h2>
      </div>
    </div>
  <% } %>

  <%# category banner %>
  <% if (is_category()) { %>
    <%
      var length = 0;
      site.categories.each(function (category) {
        if (category.name === page.category) length = category.length
      });
    %>
    <div class="header-content">
      <div class="post-text layout-block layout-padding">
        <h1 class="title-wrap"><%= page.category %></h1>
        <h2 class="title-sub-wrap">å½“å‰åˆ†ç±»ä¸‹å…±æœ‰<%= length %>ç¯‡æ–‡ç« </h2>
      </div>
    </div>
  <% } %>

  <%# tag banner %>
  <% if (is_tag()) { %>
    <%
      var length = 0;
      site.tags.each(function (tag) {
        if (tag.name === page.tag) length = tag.length
      });
    %>
    <div class="header-content">
      <div class="post-text layout-block layout-padding">
        <h1 class="title-wrap"><%= page.tag %></h1>
        <h2 class="title-sub-wrap">å½“å‰æ ‡ç­¾ä¸‹å…±æœ‰<%= length %>ç¯‡æ–‡ç« </h2>
      </div>
    </div>
  <% } %>

  <%# post banner %>
  <% if (is_post()) { %>
    <div class="header-content">
      <div class="post-text layout-block">
        <div class="layout-margin">
          <h1 class="title-wrap"><%= page.title %></h1>
          <h2 class="title-sub-wrap">
            <strong><%= page.author || config.author %></strong>
            <span>å‘å¸ƒäº</span>
            <%- partial("../_widget/date", { class_name: 'article-date', post: page, date_format: null }) %>
          </h2>
          <h2>
              <span class="post-count">ğŸ“–<%= wordcount(page.content) %>å­—</span>
              <span class="post-count">â±<%= min2read(page.content) %>åˆ†</span>
            <!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
              ğŸ‘€<span id="busuanzi_value_page_pv"></span>æ¬¡
          </h2>
          <% if ( date(page.updated, null) != date(page.date, null) ) { %>
            <h2 class="last-time">
              <span>æœ€åæ›´æ–°äº</span>
              <%- partial("../_widget/updated", { class_name: 'article-updated', post: page, date_format: null }) %>
            </h2>
          <% } %>
          <% if ( theme.comments.enable && theme.comments.use == "valine" && theme.comments.valine.visitor ) { %>
            <h2 id="<%= url_for(page.path) %>" class="title-sub-wrap leancloud_visitors" data-flag-title="<%= page.title %>">
              <em>æ–‡ç« è®¿é—®é‡</em>
              <i class="leancloud-visitors-count"></i>
            </h2>
          <% } %>
          <%- partial("../_widget/category", { page: page, class_name: 'dark' }) %>
          <%- partial("../_widget/tag", { page: page, class_name: 'dark' }) %>
        </div>
      </div>
    </div>
  <% } %>

  <%# page banner %>
  <% if (is_page()) { %>
    <div class="header-content">
      <div class="post-text layout-block layout-padding">
        <h1 class="title-wrap"><%= page.title %></h1>
        <% if (page.subtitle) { %>
          <h2 class="title-sub-wrap"><%= page.subtitle %></h2>
        <% } %>
      </div>
    </div>
  <% } %>
  
</header>